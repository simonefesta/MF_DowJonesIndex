# DOW JONES INDEX ANALYSIS
#Prelievo dei dati da Yahoo Finance
# Calcola le date di inizio e fine per l'intervallo di tre anni
start_date <- as.Date(Sys.Date() - 3*365)
end_date <- Sys.Date()
# Formatta le date nel formato richiesto dall'URL
start_timestamp <- as.POSIXct(start_date)
end_timestamp <- as.POSIXct(end_date)
# Costruisci l'URL del file CSV utilizzando le date di inizio e fine
url <- paste0("https://query1.finance.yahoo.com/v7/finance/download/%5EDJI?period1=",
as.numeric(start_timestamp), "&period2=",
as.numeric(end_timestamp), "&interval=1d&events=history")
# Imposta il percorso di destinazione per il salvataggio del file CSV
file_path <- "/Users/festinho/Progetti Uni/MF_DowJonesIndex/data/dow_jones.csv"
# Scarica il file CSV dell'indice Dow Jones degli ultimi tre anni
download.file(url, destfile = file_path, method = "auto")
# Leggi il file CSV e visualizza i dati
dow_data <- read.csv(file_path)
head(dow_data)
# Leggi il file CSV esistente
data <- read.csv(file_path)
# Aggiungi la colonna "indice riga"
data$index <- 1:nrow(data)
# Riorganizza l'ordine delle colonne
data <- data[, c("index", names(data)[-ncol(data)])]
# Salva il file CSV modificato
write.csv(data, file_path, row.names = FALSE)
#Grafico del valore "Close" degli ultimi 3 anni
# Leggi il file CSV con i dati dell'indice Dow Jones
dow_data <- read.csv(file_path)
# Converti la colonna delle date in formato di data
dow_data$Date <- as.Date(dow_data$Date)
# Crea un nuovo grafico con titolo
plot(dow_data$Date, dow_data$Close, type = "l", col = "blue", xlab = "Data", ylab = "Close Value",
main = "Andamento dell'indice Dow Jones ^DJI")
#lines(dow_data$Date, dow_data$High, col = "green", lty = "dashed")
#lines(dow_data$Date, dow_data$Low, col = "red")
# Aggiungi una legenda
#legend("topleft", legend = c("Open", "High", "Low"), col = c("blue", "green", "red"), lty = c("solid", "dashed", "solid"))
